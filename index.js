!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("lodash")):"function"==typeof define&&define.amd?define(["react","prop-types","lodash"],t):"object"==typeof exports?exports.index=t(require("react"),require("prop-types"),require("lodash")):e.index=t(e.React,e.PropTypes,e._)}(this,function(e,t,r){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){var e=16,t=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(t+=performance.now());var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var o=(t+Math.random()*e)%e|0;t=Math.floor(t/e);var n=3,i=o&n,a=8;return("x"===r?o:i|a).toString(e)});return r}function s(){return Object.assign({},y,C)}Object.defineProperty(t,"__esModule",{value:!0}),t.fieldValidatorCore=t.Validation=void 0;var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=r(1),c=o(u),d=r(2),h=o(d),f=r(3),m=o(f),g={},C={},y={TextField:{getValueFromChangeEvent:function(e){return e[0].target.value},changeCallBackCaller:function(e,t){e(t[0])},errorPropName:"errorText"},SelectField:{getValueFromChangeEvent:function(e){return e[1]},changeCallBackCaller:function(e,t){e(t[0],t[1],t[2])},errorPropName:"errorText"},DateRangePicker:{getValueFromChangeEvent:function(e){return e[0]},changeCallBackCaller:function(e,t){e(t[0])},errorPropName:"errorText"},DatePicker:{getValueFromChangeEvent:function(e){return e[1]},changeCallBackCaller:function(e,t){e(t,t[1])}},Select:{getValueFromChangeEvent:function(e){return e[0]},changeCallBackCaller:function(e,t){e(t[0])}}},v={addSupport:function(e,t,r,o){C[e]={getValueFromChangeEvent:t,changeCallBackCaller:r,errorPropName:o}},removeSupport:function(e){void 0!==C[e]?delete C.name:console.info("Field-Validator","removeComponent: didn't find the component")},getAllCurrentlySupported:function(){return s()},checkGroup:function(e){var t=!0,r={isValid:!0,validCompponents:[],inValidComponents:[]},o=g[e];return void 0===o?t=!0:o.forEach(function(e){var o=e.component;o.isValid===!1?(t=!1,r.inValidComponents.push(o.props.children)):r.validCompponents.push(o.props.children)}),r.isValid=t,r}},V=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={childCompoentToRender:null,unControlledChild:!0,isValid:!0,id:l()},r.testValidity=r.testValidity.bind(r),r}return a(t,e),p(t,[{key:"componentWillReceiveProps",value:function(e){var t=!1;if(this.state.unsupported!==!0&&this.state.unControlledChild===!1){var r=!1;m.default.isEqual(this.originalVal,e.children.props[this.props.valueProp])||(r=!0),(this.childModified===!0||r)&&(m.default.isEqual(this.currentChildValue,e.children.props[this.props.valueProp])||(this.baseProps[this.props.valueProp]=e.children.props[this.props.valueProp],this.currentChildValue=e.children.props[this.props.valueProp],t=!0,this.testValidity(this.currentChildValue)))}if(Object.keys(this.closureValues).length>0&&t===!1){var o=!1;m.default.forOwn(this.closureValues,function(t,r){m.default.isEqual(t,e.closures[r])||(o=!0)}),o&&this.mountingSetup(s()[this.typeOfCompnent].getValueFromChangeEvent,s()[this.typeOfCompnent].changeCallBackCaller,!1,e)}}},{key:"componentWillMount",value:function(){this.typeOfCompnent=this.props.componentTag?this.props.componentTag:this.props.children.type.displayName?this.props.children.type.displayName:this.props.children.type.name,void 0!==C[this.typeOfCompnent]?this.mountingSetup(C[this.typeOfCompnent].getValueFromChangeEvent,C[this.typeOfCompnent].changeCallBackCaller):void 0!==y[this.typeOfCompnent]?this.mountingSetup(y[this.typeOfCompnent].getValueFromChangeEvent,y[this.typeOfCompnent].changeCallBackCaller):(console.error("Field-Validator",this.typeOfCompnent+" is currently not supported by field-validator,\n          Please use fieldValidatorCore.addSupport to add support for the component, For more information please refer to docs"),console.info("Field-Validator","Ignoring "+this.typeOfCompnent+", and it will work as if it was not wraped with Validation tag"),this.mountingSetup(null,null,!0))}},{key:"componentDidMount",value:function(){this.props.group&&this.state.unsupported!==!0&&(void 0===g[this.props.group]&&(g[this.props.group]=[]),g[this.props.group].push({id:this.state.id,component:this}))}},{key:"mountingSetup",value:function(e,t,r,o){var n=this,i=o?o:this.props;r===!0?this.setState({childCompoentToRender:i.children,unsupported:r}):!function(){n.closureValues={},Object.keys(i.closures).length>0&&m.default.forOwn(i.closures,function(e,t){n.closureValues[t]=e}),n.baseProps=m.default.cloneDeep(i.children.props);var r=!0;n.baseProps.hasOwnProperty(i.valueProp)?(r=!1,o!==!0&&(n.originalVal=n.baseProps[i.valueProp]),n.currentChildValue=n.baseProps[i.valueProp]):n.baseProps.hasOwnProperty(i.defaultValueProp)&&(o!==!0&&(n.originalVal=n.baseProps[i.defaultValueProp]),n.currentChildValue=n.baseProps[i.defaultValueProp]);var a=n.baseProps[i.onChangeCallback];n.baseProps[i.onChangeCallback]=function(){for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];var s=e(o);n.childModified=!0,n.absorbing||(n.absorbing=!0,n.baseProps[i.valueProp]=s,n.currentChildValue=s,n.testValidity(s),a&&t(a,o),n.absorbing=!1)};var l=c.default.cloneElement(i.children,n.baseProps);n.setState({childCompoentToRender:l,unControlledChild:r})}()}},{key:"testValidity",value:function(e){var t={isValid:!0,errorMessage:null,errorPropValue:null};try{this.props.validators.every(function(r){return r.validator(e)!==!1||(t.isValid=!1,t.errorMessage=r.errorMessage,t.errorPropValue=r.errorPropValue?r.errorPropValue:r.errorMessage,!1)})}catch(e){console.error(e)}return t.isValid===!1?(s()[this.typeOfCompnent].errorPropName&&(this.baseProps[s()[this.typeOfCompnent].errorPropName]=t.errorPropValue),this.setState({childCompoentToRender:c.default.cloneElement(this.props.children,this.baseProps),isValid:!1,errorText:t.errorMessage})):(s()[this.typeOfCompnent].errorPropName&&(this.baseProps[s()[this.typeOfCompnent].errorPropName]=null),this.setState({childCompoentToRender:c.default.cloneElement(this.props.children,this.baseProps),isValid:!0,errorText:null})),t}},{key:"componentWillUnmount",value:function(){var e=this;this.props.group&&m.default.remove(g[this.props.group],function(t){return t.id===e.state.id})}},{key:"render",value:function(){return this.state.unsupported===!0?this.props.children:c.default.createElement("span",null,this.state.childCompoentToRender?this.state.childCompoentToRender:"",s()[this.typeOfCompnent].errorPropName||this.state.isValid!==!1?"":c.default.createElement("div",{style:Object.assign({},{color:"red",fontSize:"12px",position:"absolute"},this.props.errorStyle)},this.state.errorText))}},{key:"isValid",get:function(){return this.testValidity(this.currentChildValue).isValid}},{key:"errorMessage",get:function(){return this.testValidity(this.currentChildValue).errorMessage}},{key:"errorPropValue",get:function(){return this.testValidity(this.currentChildValue).errorPropValue}},{key:"isModified",get:function(){return this.childModified}}]),t}(u.Component);V.propTypes={children:h.default.oneOfType([h.default.element]),validators:h.default.array.isRequired,onChangeCallback:h.default.string,group:h.default.string,valueProp:h.default.string,defaultValueProp:h.default.string,errorStyle:h.default.object,closures:h.default.object,componentTag:h.default.string},V.defaultProps={onChangeCallback:"onChange",valueProp:"value",defaultValueProp:"defaultValue",errorStyle:{},closures:{}},t.Validation=V,t.fieldValidatorCore=v},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r}])});